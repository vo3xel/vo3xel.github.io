{"version":3,"sources":["assets/axes.mtl","assets/axes.obj","assets/cube.obj","assets/pyramid.obj","assets/53418.svg","components/OBJScene.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","OBJScene","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_onAnimate","controls","update","state","scene","model","material","Material","console","log","refs","TrackballControls","mainCamera","ReactDOM","findDOMNode","react3","pointLight","THREE","add","setState","dispose","width","window","innerWidth","height","innerHeight","react_default","a","createElement","React3_default","ref","onAnimate","fog","key","name","fov","aspect","near","far","position","lookAt","build_default","group","React","Component","OBJLoader","App","onOpenModal","open","onCloseModal","fileUploadError","objLoader","modelFileUploaded","uploadedModelFileName","mesh","vertexExport","positions","map","vertexline","toLocaleString","useGrouping","minimumFractionDigits","replace","facesExport","cells","faceline","file","Blob","join","type","URL","createObjectURL","Promise","resolve","reject","fetch","then","r","text","objfilecontent","obj","vertexMatches","match","vertices","vertex","split","parseFloat","shift","vertexNormalsMatches","vertexnormals","vn","vertexnormal","facesMatches","faces","Number","catch","err","lod","_this2","importOBJFromFile","CatmullClark","exportOBJToFile","fileObject","_this3","size","error","reader","FileReader","onload","e","result","loadModel","readAsText","index","_this4","Model1","Model2","Model3","calculateCatmullClark","_this5","className","style","color","href","onClick","src","UploadIcon","components_OBJScene","index_es","onClose","center","lib","extensions","maxSize","onChange","FileObject","handleFileUpload","onError","errMsg","modalError","react_fps_stats_dist_default","left","Boolean","location","hostname","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,2UC4EzBC,cAnEf,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAwBTQ,WAAa,WAAQP,EAAKQ,SAASC,UAvBhCT,EAAKU,MAAQ,CACXC,MAAO,GACPC,MAAOZ,EAAKD,MAAMa,MAClBC,SAAUC,KAEZC,QAAQC,IAAI,iBAAmBhB,EAAKU,MAAME,OAP3BZ,mFAWC,IACRW,EAAUR,KAAKc,KAAfN,MACFH,EAAW,IAAIU,IAAkBf,KAAKc,KAAKE,WAAYC,IAASC,YAAYlB,KAAKc,KAAKK,SAC5FnB,KAAKK,SAAWA,EAChB,IAAIe,EAAa,IAAIC,aAAkB,SAAU,EAAG,KACpDrB,KAAKc,KAAKE,WAAWM,IAAKF,GAC1BpB,KAAKuB,SAAS,CAAEf,yDAIhBR,KAAKK,SAASmB,iBACPxB,KAAKK,0CAMZ,IAAIoB,EAAQC,OAAOC,WACfC,EAASF,OAAOG,YACpB,OACEC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CACEf,WAAW,SACXS,MAAOA,EAAM,IACbG,OAAQA,EAAO,IACfM,IAAI,SACJC,UAAWnC,KAAKI,YAEhB0B,EAAAC,EAAAC,cAAA,SAAOE,IAAI,QACXE,IAAQ,IAAIf,OAEVS,EAAAC,EAAAC,cAAA,qBACEK,IAAG,oBACHC,KAAK,SACLC,IAAK,GACLC,OAAQf,EAAQG,EAChBa,KAAM,GACNC,IAAK,IACLR,IAAI,aACJS,SAAU,IAAItB,UAAc,EAAG,GAAI,IACnCuB,OAAQ,IAAIvB,UAAc,EAAG,EAAG,KAGlCS,EAAAC,EAAAC,cAAA,SAAOM,KAAK,cAAcJ,IAAI,YAC5BJ,EAAAC,EAAAC,cAACa,EAAAd,EAAD,CACEO,KAAK,QACL7B,MAAOT,KAAKO,MAAME,MAClBC,SAAUV,KAAKO,MAAMI,SACrBH,MAAOR,KAAKO,MAAMC,MAClBsC,MAAM,0BA5DGC,IAAMC,yICO7BC,EAAU5B,OAkNK6B,cA/Mb,SAAAA,EAAYtD,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkD,IACjBrD,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoD,GAAA/C,KAAAH,KAAMJ,KAWRuD,YAAc,WACZtD,EAAK0B,SAAS,CAAE6B,MAAM,KAbLvD,EAgBnBwD,aAAe,WACbxD,EAAK0B,SAAS,CAAE6B,MAAM,IACtBvD,EAAK0B,SAAS,CAAE+B,iBAAiB,KAhBjCzD,EAAKwB,MAAQA,EACbxB,EAAK0D,UAAY,IAAI1D,EAAKwB,MAAM4B,UAChCpD,EAAKU,MAAQ,CACXE,MAAO,KACP2C,MAAM,EACNI,kBAAmB,KACnBC,sBAAuB,gBARR5D,+EAqBH6D,GACd,IAAIC,EAAeD,EAAKE,UAAUC,IAAI,SAACC,GACnC,MAAO,KAAOA,EAAW,GAAGC,eAAe,WAAY,CAACC,aAAY,EAAOC,sBAAsB,IAAIC,QAAQ,IAAI,KAAO,IAAMJ,EAAW,GAAGC,eAAe,WAAY,CAACC,aAAY,EAAOC,sBAAsB,IAAIC,QAAQ,IAAI,KAAO,IAAMJ,EAAW,GAAGC,eAAe,WAAY,CAACC,aAAY,EAAOC,sBAAsB,IAAIC,QAAQ,IAAI,OAEjVC,EAAcT,EAAKU,MAAMP,IAAI,SAACQ,GAChC,MAAO,MAAQA,EAAS,GAAG,GAAK,KAAOA,EAAS,GAAG,GAAK,KAAOA,EAAS,GAAG,GAAK,KAAOA,EAAS,GAAG,KAEjGC,EAAO,IAAIC,KAAK,CAACZ,EAAaa,KAAK,MAAQ,KAAOL,EAAYK,KAAK,OAAQ,CAACC,KAAM,eACtF,OAAQC,IAAIC,gBAAgBL,6CAGZ7D,GAChB,OAAO,IAAImE,QAAQ,SAASC,EAASC,GACrCC,MAAMtE,GACLuE,KAAK,SAACC,GAAD,OAAOA,EAAEC,SACdF,KAAK,SAAAG,GACJ,IAAIC,EAAM,GACNC,EAAgBF,EAAeG,MAAM,4BACrCD,IAEFD,EAAIG,SAAWF,EAAcxB,IAAI,SAAS2B,GAEtC,IAAID,EAAWC,EAAOC,MAAM,KAG5B,OAFAF,EAAWA,EAAS1B,IAAI,SAAC2B,GAAD,OAAYE,WAAWF,MACtCG,QACFJ,KAGb,IAAIK,EAAuBT,EAAeG,MAAM,6BAC5CM,IAEFR,EAAIS,cAAgBD,EAAqB/B,IAAI,SAASiC,GAElD,IAAID,EAAgBC,EAAGL,MAAM,KAG7B,OAFAI,EAAcF,QACdE,EAAgBA,EAAchC,IAAI,SAACkC,GAAD,OAAkBL,WAAWK,QAIrE,IAAIC,EAAeb,EAAeG,MAAM,yBACpCU,IAEFZ,EAAIa,MAAQD,EAAanC,IAAI,SAASiC,GAGlC,IAAIG,GADJH,EAAKA,EAAG5B,QAAQ,QAAS,MACVuB,MAAM,KAErB,OADAQ,EAAMN,QACC,CAAEO,OAAOD,EAAM,IAAI,EAAGC,OAAOD,EAAM,IAAI,EAAGC,OAAOD,EAAM,IAAI,EAAGC,OAAOD,EAAM,IAAI,MAG5FpB,EAAQO,KAETe,MAAM,SAACC,GAAD,OAASvB,EAAQuB,qDAIJ3F,EAAO4F,GAAI,IAAAC,EAAAtG,KAC/BA,KAAKuG,kBAAkB9F,GACtBuE,KAAK,SAACI,GACL,IAAI1B,EAAQ8C,EAAapB,EAAIG,SAAUH,EAAIa,MAAOI,GAAK,GACnD5F,EAAQ6F,EAAKG,gBAAgB/C,GACjC4C,EAAK/E,SAAS,CAAEd,MAAOA,+CAIViG,GAAW,IAAAC,EAAA3G,KAC1B,GAAG0G,EAAWE,KAAK,KAAK,MAAQ,EAC9BhG,QAAQiG,MAAM,2BADhB,CAIAjG,QAAQC,IAAI6F,GACZ,IAAII,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAACC,GACf,IAAI/B,EAAO4B,EAAOI,OACd5C,EAAO,IAAIC,KAAK,CAACW,GAAO,CAACT,KAAM,eAE/BhE,EAAQiE,IAAIC,gBAAgBL,GAChCqC,EAAKpF,SAAS,CAAEiC,kBAAmB/C,EAAOgD,sBAAuBiD,EAAWpE,MAAO,kBAAMqE,EAAKQ,UAAU,EAAG,KAC3GR,EAAKtD,gBAEPyD,EAAOM,WAAWV,sCAGVW,EAAOhB,GAAI,IAAAiB,EAAAtH,KACnBY,QAAQC,IAAIwG,EAAOhB,GACnBrG,KAAKuB,SAAS,CAAEd,MAAO,MAAQ,WAC7B,IAAIA,EAAQ,GACC,IAAV4G,IACD5G,EAAQ8G,KAEG,IAAVF,IACD5G,EAAQ+G,KAEG,IAAVH,IACD5G,EAAQgH,KAEG,IAAVJ,IACDzG,QAAQC,IAAIyG,EAAK/G,MAAMiD,mBACvB/C,EAAQ6G,EAAK/G,MAAMiD,mBAEV,IAAR6C,EACDiB,EAAK/F,SAAS,CAAEd,MAAOA,GAAUA,EAASG,QAAQC,IAAI,KAAOJ,IAG7D6G,EAAKI,sBAAsBjH,EAAO4F,0CAMtCrG,KAAKuB,SAAS,CAAE+B,iBAAiB,qCAG1B,IAAAqE,EAAA3H,KACCoD,EAASpD,KAAKO,MAAd6C,KACR,OACEtB,EAAAC,EAAAC,cAAA,OAAK4F,UAAU,OACb9F,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,QAAM6F,MAAO,CAAEC,MAAO,SAAtB,uBACJhG,EAAAC,EAAAC,cAAA,MAAI4F,UAAU,YACZ9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,IAAKS,UAAU,WAA7D,QACF9F,EAAAC,EAAAC,cAAA,OAAK4F,UAAU,oBACb9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,iBAGFrF,EAAAC,EAAAC,cAAA,MAAI4F,UAAU,YACZ9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,IAAKS,UAAU,WAA7D,QACF9F,EAAAC,EAAAC,cAAA,OAAK4F,UAAU,oBACb9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,iBAGFrF,EAAAC,EAAAC,cAAA,MAAI4F,UAAU,YACZ9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,IAAKS,UAAU,WAA7D,WACF9F,EAAAC,EAAAC,cAAA,OAAK4F,UAAU,oBACb9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,iBAGAnH,KAAKO,MAAMiD,kBACb1B,EAAAC,EAAAC,cAAA,MAAI4F,UAAU,YACd9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,IAAKS,UAAU,WAAY5H,KAAKO,MAAMkD,uBACtF3B,EAAAC,EAAAC,cAAA,OAAK4F,UAAU,oBACb9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,eACArF,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKR,UAAU,EAAG,KAA9C,iBAEO,KACPrF,EAAAC,EAAAC,cAAA,MAAI4F,UAAU,YACd9F,EAAAC,EAAAC,cAAA,KAAG+F,KAAK,IAAIC,QAAS,WAAOL,EAAKxE,eAAgByE,UAAU,WAAW9F,EAAAC,EAAAC,cAAA,OAAKiG,IAAKC,IAAYL,MAAO,CAACpG,MAAO,GAAGG,OAAQ,SAGtH5B,KAAKO,MAAME,MAASqB,EAAAC,EAAAC,cAACmG,EAAD,CAAUP,UAAU,QAAQ1F,IAAI,WAAWzB,MAAQT,KAAKO,MAAME,QAAa,KACnGqB,EAAAC,EAAAC,cAACoG,EAAA,EAAD,CAAOhF,KAAMA,EAAMiF,QAASrI,KAAKqD,aAAciF,QAAM,GACrDxG,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,UAAK,kCACLF,EAAAC,EAAAC,cAACuG,EAAA,WAAD,CACEC,WAAY,CAAC,OACbC,QAAS,EACTC,SAAU,SAAAC,GAAU,OAAMhB,EAAKiB,iBAAiBD,IAChDE,QAAU,SAAAC,GAAM,OAAMnB,EAAKoB,eAE3BjH,EAAAC,EAAAC,cAAA,+BAILF,EAAAC,EAAAC,cAACgH,EAAAjH,EAAD,CACCkH,KAAK,kBAzMOjG,aCLEkG,QACW,cAA7BxH,OAAOyH,SAASC,UAEe,UAA7B1H,OAAOyH,SAASC,UAEhB1H,OAAOyH,SAASC,SAAS9D,MACvB,2DCZNrE,IAASoI,OAAOvH,EAAAC,EAAAC,cAACsH,EAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM3E,KAAK,SAAA4E,GACjCA,EAAaC","file":"static/js/main.101d5a7d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/axes.ab1f88a8.mtl\";","module.exports = __webpack_public_path__ + \"static/media/axes.d0ed0548.obj\";","module.exports = __webpack_public_path__ + \"static/media/cube.41d3f142.obj\";","module.exports = __webpack_public_path__ + \"static/media/pyramid.b5a2d763.obj\";","module.exports = __webpack_public_path__ + \"static/media/53418.9892a59f.svg\";","import * as THREE from \"three\";\r\nimport React from \"react\";\r\nimport React3 from \"react-three-renderer\";\r\nimport ObjectModel from 'react-three-renderer-objects';\r\nimport Material from \"../assets/axes.mtl\";\r\nimport TrackballControls from \"three-trackballcontrols\"\r\nimport ReactDOM from 'react-dom';\r\n\r\nclass OBJScene extends React.Component {\r\nconstructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scene: {},\r\n      model: this.props.model,\r\n      material: Material,\r\n    };\r\n    console.log(\"(OBJScene) -> \" + this.state.model)\r\n  }\r\n\r\n\r\ncomponentDidMount() {\r\n    const { scene } = this.refs;\r\n    const controls = new TrackballControls(this.refs.mainCamera, ReactDOM.findDOMNode(this.refs.react3));\r\n    this.controls = controls;\r\n    var pointLight = new THREE.PointLight( 0xffffff, 1, 100 ); \r\n    this.refs.mainCamera.add( pointLight );\r\n    this.setState({ scene });\r\n  }\r\n\r\n  componentWillUnmount() {  \r\n    this.controls.dispose();\r\n    delete this.controls;\r\n }\r\n \r\n _onAnimate = () => { this.controls.update(); };\r\n\r\nrender() {\r\n    let width = window.innerWidth;\r\n    let height = window.innerHeight;\r\n    return (\r\n      <React3\r\n        mainCamera=\"camera\"\r\n        width={width-100}\r\n        height={height-100}\r\n        ref=\"react3\"\r\n        onAnimate={this._onAnimate}\r\n      >\r\n        <scene ref=\"scene\"\r\n        fog = { new THREE.Fog() }\r\n        >\r\n          <perspectiveCamera\r\n            key={`perspectiveCamera`}\r\n            name=\"camera\"\r\n            fov={50}\r\n            aspect={width / height}\r\n            near={0.5}\r\n            far={1000}\r\n            ref=\"mainCamera\"\r\n            position={new THREE.Vector3(0, 10, 10)}\r\n            lookAt={new THREE.Vector3(0, 0, 0)}\r\n          />\r\n\r\n          <group name=\"objectGroup\" ref=\"objgroup\">\r\n            <ObjectModel\r\n              name=\"model\"\r\n              model={this.state.model}\r\n              material={this.state.Material}\r\n              scene={this.state.scene}\r\n              group=\"objectGroup\"\r\n            />\r\n          </group>\r\n        </scene>\r\n      </React3>\r\n    );\r\n  }\r\n}\r\nexport default OBJScene;","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport OBJScene from './components/OBJScene';\r\nimport Model1 from \"./assets/axes.obj\";\r\nimport Model2 from \"./assets/cube.obj\";\r\nimport Model3 from \"./assets/pyramid.obj\";\r\nimport * as THREE from 'three';\r\nimport * as OBJLoader from 'three-obj-loader';\r\nimport * as CatmullClark from 'gl-catmull-clark'\r\nimport UploadIcon from \"./assets/53418.svg\"\r\nimport ReactDOM from 'react-dom';\r\nimport Modal from 'react-responsive-modal';\r\nimport { FilePicker } from 'react-file-picker'\r\nimport FPSStats from \"react-fps-stats\";\r\n\r\nOBJLoader(THREE);\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.THREE = THREE;\r\n    this.objLoader = new this.THREE.OBJLoader();\r\n    this.state = {\r\n      model: null,\r\n      open: false,\r\n      modelFileUploaded: null,\r\n      uploadedModelFileName: 'Custom model'\r\n    };\r\n  }\r\n\r\n  onOpenModal = () => {\r\n    this.setState({ open: true });\r\n  };\r\n\r\n  onCloseModal = () => {\r\n    this.setState({ open: false });\r\n    this.setState({ fileUploadError: false });\r\n  };\r\n\r\n  exportOBJToFile(mesh){\r\n    var vertexExport = mesh.positions.map((vertexline) => {\r\n        return \"v \" + vertexline[0].toLocaleString('fullwide', {useGrouping:false, minimumFractionDigits:6}).replace(\",\",\".\") + \" \" + vertexline[1].toLocaleString('fullwide', {useGrouping:false, minimumFractionDigits:6}).replace(\",\",\".\") + \" \" + vertexline[2].toLocaleString('fullwide', {useGrouping:false, minimumFractionDigits:6}).replace(\",\",\".\")\r\n    })\r\n    var facesExport = mesh.cells.map((faceline) => {\r\n      return \"f \" + (faceline[0]+1) + \" \" + (faceline[1]+1) + \" \" + (faceline[2]+1) + \" \" + (faceline[3]+1)\r\n  })\r\n    var file = new Blob([vertexExport.join(\"\\n\") + \"\\n\" + facesExport.join(\"\\n\")], {type: 'text/plain'});\r\n    return  URL.createObjectURL(file);\r\n  }\r\n\r\n  importOBJFromFile(model){\r\n    return new Promise(function(resolve, reject){\r\n    fetch(model)\r\n    .then((r) => r.text())\r\n    .then(objfilecontent  => {\r\n      var obj = {};\r\n      var vertexMatches = objfilecontent.match(/^v( -?\\d+(\\.\\d+)?){3}$/gm);\r\n      if (vertexMatches)\r\n      {\r\n        obj.vertices = vertexMatches.map(function(vertex)\r\n          {\r\n            var vertices = vertex.split(\" \");\r\n            vertices = vertices.map((vertex) => parseFloat(vertex))\r\n            vertices.shift();\r\n            return vertices;\r\n          });\r\n      }\r\n      var vertexNormalsMatches = objfilecontent.match(/^vn( -?\\d+(\\.\\d+)?){3}$/gm);\r\n      if (vertexNormalsMatches)\r\n      {\r\n        obj.vertexnormals = vertexNormalsMatches.map(function(vn)\r\n          {\r\n            var vertexnormals = vn.split(\" \");\r\n            vertexnormals.shift();\r\n            vertexnormals = vertexnormals.map((vertexnormal) => parseFloat(vertexnormal))\r\n            return vertexnormals;\r\n          });\r\n      }\r\n      var facesMatches = objfilecontent.match(/^f( \\d+\\/\\/\\d+){4}$/gm);\r\n      if (facesMatches)\r\n      {\r\n        obj.faces = facesMatches.map(function(vn)\r\n          {\r\n            vn = vn.replace(/\\/\\//g, \" \");\r\n            var faces = vn.split(\" \");\r\n            faces.shift();\r\n            return [ Number(faces[0])-1, Number(faces[2])-1, Number(faces[4])-1, Number(faces[6])-1 ];\r\n          });\r\n      }\r\n      resolve(obj);\r\n    })\r\n    .catch((err) => resolve(err))\r\n  })\r\n}\r\n\r\n  calculateCatmullClark(model, lod){\r\n    this.importOBJFromFile(model)\r\n    .then((obj) => {\r\n      var mesh =  CatmullClark(obj.vertices, obj.faces, lod, false)\r\n      var model = this.exportOBJToFile(mesh)\r\n      this.setState({ model: model })\r\n    })\r\n  }\r\n\r\n  handleFileUpload(fileObject){\r\n    if(fileObject.size/1024/1024 >= 5){\r\n      console.error(\"File too big: > 5MB\")\r\n      return\r\n    }\r\n    console.log(fileObject )\r\n    var reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      var text = reader.result;\r\n      var file = new Blob([text], {type: 'text/plain'});\r\n\r\n      var model = URL.createObjectURL(file);\r\n      this.setState({ modelFileUploaded: model, uploadedModelFileName: fileObject.name}, () => this.loadModel(4, 0))\r\n      this.onCloseModal()\r\n    }\r\n    reader.readAsText(fileObject)\r\n  }\r\n  \r\n  loadModel(index, lod){\r\n    console.log(index, lod);\r\n    this.setState({ model: null }, () => {\r\n      var model = {}\r\n      if(index === 1){\r\n        model = Model1\r\n      }\r\n      if(index === 2){\r\n        model = Model2\r\n      }\r\n      if(index === 3){\r\n        model = Model3\r\n      }\r\n      if(index === 4){\r\n        console.log(this.state.modelFileUploaded)\r\n        model = this.state.modelFileUploaded\r\n      }\r\n      if(lod === 0){\r\n        this.setState({ model: model }, (model) = console.log(\"* \" + model));\r\n      }\r\n      else{\r\n        this.calculateCatmullClark(model, lod);\r\n      }\r\n    });\r\n  }\r\n\r\n  modalError(){\r\n    this.setState({ fileUploadError: true })\r\n  }\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n    return (\r\n      <div className=\"App\">\r\n        <ul>\r\n          <li><span style={{ color: 'gray' }}>Catmull-Clark demo</span></li>\r\n          <li className=\"dropdown\">\r\n            <a href=\"#\" onClick={() => {this.loadModel(1, 0)}} className=\"dropbtn\" >Axis</a>\r\n          <div className=\"dropdown-content\">\r\n            <a href=\"#\" onClick={() => {this.loadModel(1, 1)}}>iteration 1</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(1, 2)}}>iteration 2</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(1, 3)}}>iteration 3</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(1, 4)}}>iteration 4</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(1, 5)}}>iteration 5</a>\r\n          </div>\r\n          </li>\r\n          <li className=\"dropdown\">\r\n            <a href=\"#\" onClick={() => {this.loadModel(2, 0)}} className=\"dropbtn\" >Cube</a>\r\n          <div className=\"dropdown-content\">\r\n            <a href=\"#\" onClick={() => {this.loadModel(2, 1)}}>iteration 1</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(2, 2)}}>iteration 2</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(2, 3)}}>iteration 3</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(2, 4)}}>iteration 4</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(2, 5)}}>iteration 5</a>\r\n          </div>\r\n          </li>\r\n          <li className=\"dropdown\">\r\n            <a href=\"#\" onClick={() => {this.loadModel(3, 0)}} className=\"dropbtn\" >Pyramid</a>\r\n          <div className=\"dropdown-content\">\r\n            <a href=\"#\" onClick={() => {this.loadModel(3, 1)}}>iteration 1</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(3, 2)}}>iteration 2</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(3, 3)}}>iteration 3</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(3, 4)}}>iteration 4</a>\r\n            <a href=\"#\" onClick={() => {this.loadModel(3, 5)}}>iteration 5</a>\r\n          </div>\r\n          </li>\r\n          { this.state.modelFileUploaded ? (\r\n          <li className=\"dropdown\">\r\n          <a href=\"#\" onClick={() => {this.loadModel(4, 0)}} className=\"dropbtn\" >{this.state.uploadedModelFileName}</a>\r\n        <div className=\"dropdown-content\">\r\n          <a href=\"#\" onClick={() => {this.loadModel(4, 1)}}>iteration 1</a>\r\n          <a href=\"#\" onClick={() => {this.loadModel(4, 2)}}>iteration 2</a>\r\n          <a href=\"#\" onClick={() => {this.loadModel(4, 3)}}>iteration 3</a>\r\n          <a href=\"#\" onClick={() => {this.loadModel(4, 4)}}>iteration 4</a>\r\n          <a href=\"#\" onClick={() => {this.loadModel(4, 5)}}>iteration 5</a>\r\n        </div>\r\n        </li>) : null}\r\n          <li className=\"dropdown\">\r\n          <a href=\"#\" onClick={() => {this.onOpenModal()}} className=\"dropbtn\" ><img src={UploadIcon} style={{width: 20,height: 20}}/></a>\r\n        </li>\r\n      </ul>\r\n        { this.state.model ? (<OBJScene className=\"scene\" ref=\"objscene\" model={ this.state.model }/>) : null}\r\n      <Modal open={open} onClose={this.onCloseModal} center>\r\n      <center>\r\n        <h2>{'Upload OBJ file ( â‰¤ 5 MB)'}</h2>\r\n        <FilePicker\r\n          extensions={['obj']}\r\n          maxSize={5}\r\n          onChange={FileObject => ( this.handleFileUpload(FileObject) )}\r\n          onError={ errMsg => ( this.modalError() )}\r\n        >\r\n          <button>Upload OBJ</button>\r\n        </FilePicker>\r\n        </center>\r\n      </Modal>\r\n     <FPSStats\r\n      left='650px'\r\n      />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}